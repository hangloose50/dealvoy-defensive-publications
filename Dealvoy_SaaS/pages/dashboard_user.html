<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard - Dealvoy AI</title>
    <meta name="description" content="Monitor your AI agents and track your e-commerce performance in real-time">
    
    <!-- Dealvoy Favicon & Icons -->
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/assets/android-chrome-192x192.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#0066cc">
    
    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #0066cc;
            --secondary-color: #4CAF50;
            --accent-color: #FFC107;
            --danger-color: #F44336;
            --warning-color: #FF9800;
            --info-color: #2196F3;
            --text-primary: #333333;
            --text-secondary: #666666;
            --text-light: #999999;
            --background-light: #f8f9fa;
            --background-white: #ffffff;
            --border-color: #e0e0e0;
            --shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--background-light);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        .header {
            background: var(--background-white);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--primary-color);
            text-decoration: none;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            background: var(--background-light);
            border-radius: 8px;
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .btn-outline:hover {
            background: var(--background-light);
        }

        /* Dashboard Layout */
        .dashboard {
            padding: 24px 0;
        }

        .dashboard-header {
            margin-bottom: 32px;
        }

        .welcome-text {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 16px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: var(--background-white);
            padding: 24px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            transition: transform 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .stat-title {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .stat-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-change {
            font-size: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .positive {
            color: var(--secondary-color);
        }

        .negative {
            color: var(--danger-color);
        }

        /* Scan Usage Components */
        .scan-usage-card {
            position: relative;
            overflow: hidden;
        }

        .scan-usage-bar {
            width: 100%;
            height: 8px;
            background: var(--background-light);
            border-radius: 4px;
            margin: 12px 0;
            overflow: hidden;
        }

        .scan-usage-fill {
            height: 100%;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .usage-low { background: linear-gradient(90deg, #22C55E, #16A34A); }
        .usage-medium { background: linear-gradient(90deg, #F59E0B, #D97706); }
        .usage-high { background: linear-gradient(90deg, #EF4444, #DC2626); }

        .scan-usage-text {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .scan-count {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .scan-alert {
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            margin-top: 8px;
            display: none;
        }

        .scan-alert.warning {
            background: rgba(245, 158, 11, 0.1);
            color: #D97706;
            border: 1px solid rgba(245, 158, 11, 0.2);
            display: block;
        }

        .scan-alert.critical {
            background: rgba(239, 68, 68, 0.1);
            color: #DC2626;
            border: 1px solid rgba(239, 68, 68, 0.2);
            display: block;
        }

        .upgrade-btn {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            margin-left: 8px;
            transition: all 0.3s ease;
        }

        .upgrade-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0, 102, 204, 0.3);
        }

        .tier-badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .tier-badge.free { background: rgba(156, 163, 175, 0.1); color: #6B7280; }
        .tier-badge.starter { background: rgba(34, 197, 94, 0.1); color: #16A34A; }
        .tier-badge.pro { background: rgba(59, 130, 246, 0.1); color: #2563EB; }
        .tier-badge.enterprise { background: rgba(147, 51, 234, 0.1); color: #7C3AED; }
        .tier-badge.required { background: rgba(239, 68, 68, 0.1); color: #DC2626; }

        /* Enhanced Agent Cards */
        .agents-showcase {
            margin: 24px 0;
        }

        .showcase-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .agent-grid.enhanced {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }

        .agent-card {
            background: var(--background-white);
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .agent-card.accessible {
            border-color: rgba(34, 197, 94, 0.2);
        }

        .agent-card.accessible:hover {
            border-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .agent-card.locked {
            border-color: rgba(239, 68, 68, 0.2);
            opacity: 0.8;
        }

        .agent-card.locked:hover {
            border-color: #DC2626;
            transform: translateY(-1px);
        }

        .agent-header {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .agent-icon {
            font-size: 32px;
            margin-right: 12px;
        }

        .agent-icon.locked-icon {
            opacity: 0.5;
            filter: grayscale(50%);
        }

        .agent-info {
            flex: 1;
        }

        .agent-info h3 {
            font-size: 16px;
            font-weight: 600;
            margin: 0 0 4px 0;
            color: var(--text-primary);
        }

        .agent-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            font-weight: 500;
            color: var(--secondary-color);
        }

        .agent-status.active .status-indicator {
            width: 8px;
            height: 8px;
            background: var(--secondary-color);
            border-radius: 50%;
        }

        .lock-indicator {
            color: #DC2626;
        }

        .agent-description {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .agent-features {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 16px;
        }

        .feature-tag {
            padding: 4px 8px;
            background: rgba(59, 130, 246, 0.1);
            color: #2563EB;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 500;
        }

        .feature-tag.locked {
            background: rgba(156, 163, 175, 0.1);
            color: #6B7280;
        }

        .feature-tag.more {
            background: rgba(107, 114, 128, 0.1);
            color: #6B7280;
        }

        .agent-actions {
            display: flex;
            gap: 8px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
            font-size: 13px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: #0052a3;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--background-light);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: white;
            border-color: var(--primary-color);
        }

        .btn-upgrade {
            background: linear-gradient(135deg, #DC2626, #B91C1C);
            color: white;
            border: none;
        }

        .btn-upgrade:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        /* Tier Summary */
        .tier-summary {
            background: var(--background-white);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            text-align: center;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-item .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 4px;
        }

        .stat-item .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Upgrade Section */
        .upgrade-section {
            background: linear-gradient(135deg, rgba(147, 51, 234, 0.05), rgba(59, 130, 246, 0.05));
            border: 2px solid rgba(147, 51, 234, 0.2);
            border-radius: 12px;
            padding: 24px;
            margin-top: 32px;
            text-align: center;
        }

        .upgrade-header h3 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--text-primary);
        }

        .upgrade-header p {
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .upgrade-benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .benefit-item {
            font-size: 14px;
            color: var(--text-primary);
            font-weight: 500;
        }

        .upgrade-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .btn-upgrade-primary {
            background: linear-gradient(135deg, #7C3AED, #5B21B6);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-upgrade-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(124, 58, 237, 0.3);
        }

        /* Core Agents */
        .core-agents {
            margin-top: 32px;
        }

        /* Section Actions */
        .section-actions {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .status-count {
            font-size: 14px;
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Stat Icon Classes */
        .stat-icon-success {
            background: rgba(76, 175, 80, 0.1) !important;
            color: var(--secondary-color) !important;
        }

        .stat-icon-primary {
            background: rgba(0, 102, 204, 0.1) !important;
            color: var(--primary-color) !important;
        }

        .stat-icon-warning {
            background: rgba(255, 193, 7, 0.1) !important;
            color: var(--accent-color) !important;
        }

        .usage-icon {
            background: rgba(0, 102, 204, 0.1) !important;
            color: var(--primary-color) !important;
        }

        .usage-icon.warning {
            background: rgba(245, 158, 11, 0.1) !important;
            color: #D97706 !important;
        }

        .usage-icon.critical {
            background: rgba(239, 68, 68, 0.1) !important;
            color: #DC2626 !important;
        }

        .trending-icon {
            font-size: 12px !important;
        }

        .check-icon {
            font-size: 12px !important;
        }

        /* Agent Status */
        .section {
            background: var(--background-white);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: var(--shadow);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
        }

        .agent-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }

        .agent-card {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            transition: all 0.2s;
        }

        .agent-card:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow);
        }

        .agent-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .agent-name {
            font-weight: 600;
            font-size: 14px;
        }

        .agent-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-active {
            background: var(--secondary-color);
        }

        .status-idle {
            background: var(--warning-color);
        }

        .status-error {
            background: var(--danger-color);
        }

        .agent-metrics {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .performance-bar {
            width: 100%;
            height: 4px;
            background: var(--border-color);
            border-radius: 2px;
            margin: 8px 0;
            overflow: hidden;
        }

        .performance-fill {
            height: 100%;
            background: var(--secondary-color);
            transition: width 0.3s;
        }

        /* Recent Activity */

        .activity-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 500;
            margin-bottom: 2px;
        }

        .activity-time {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Quick Actions */
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .action-button {
            background: var(--background-light);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            color: var(--text-primary);
        }

        .action-button:hover {
            background: var(--background-white);
            border-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .action-icon {
            font-size: 32px;
            color: var(--primary-color);
            margin-bottom: 8px;
        }

        .action-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .action-description {
            font-size: 12px;
            color: var(--text-secondary);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .agent-grid {
                grid-template-columns: 1fr;
            }
            
            .actions-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .welcome-text {
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="/pages/home.html" class="logo">
                    <span class="material-icons">smart_toy</span>
                    <span class="logo-text">Dealvoy</span>
                </a>
                
                <div class="user-menu">
                    <div class="user-info">
                        <div class="user-avatar">JD</div>
                        <div>
                            <div style="font-weight: 600; font-size: 14px;">John Doe</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">Pro Plan</div>
                        </div>
                    </div>
                    <a href="/pages/pricing.html" class="btn btn-outline">
                        <span class="material-icons">upgrade</span>
                        Upgrade
                    </a>
                    <a href="/auth/logout.html" class="btn btn-outline">
                        <span class="material-icons">logout</span>
                        Logout
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Dashboard Content -->
    <main class="dashboard">
        <div class="container">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <h1 class="welcome-text">Welcome back, John! 👋</h1>
                <p class="subtitle">Your 46 AI agents are working hard to optimize your e-commerce success</p>
            </div>

            <!-- Key Metrics -->
            <div class="stats-grid">
                <!-- Scan Usage Card -->
                <div class="stat-card scan-usage-card">
                    <div class="stat-header">
                        <div class="stat-title">Scan Usage <span class="tier-badge" id="currentTier">Starter</span></div>
                        <div class="stat-icon usage-icon" id="usageIcon">
                            <span class="material-icons">analytics</span>
                        </div>
                    </div>
                    <div class="scan-usage-text">Monthly Scans</div>
                    <div class="scan-count" id="scanCount">73 / 100</div>
                    <div class="scan-usage-bar">
                        <div class="scan-usage-fill usage-high" id="scanUsageFill"></div>
                    </div>
                    <div class="scan-alert warning" id="scanAlert">
                        ⚠️ You're nearing your scan limit. Consider upgrading for more power!
                        <button class="upgrade-btn" onclick="showUpgradeModal()">Upgrade Plan</button>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">Active Agents</div>
                        <div class="stat-icon stat-icon-success">
                            <span class="material-icons">smart_toy</span>
                        </div>
                    </div>
                    <div class="stat-value">43/46</div>
                    <div class="stat-change positive">
                        <span class="material-icons trending-icon">trending_up</span>
                        +2 from yesterday
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">Avg Performance</div>
                        <div class="stat-icon stat-icon-primary">
                            <span class="material-icons">analytics</span>
                        </div>
                    </div>
                    <div class="stat-value">91.7%</div>
                    <div class="stat-change positive">
                        <span class="material-icons trending-icon">trending_up</span>
                        +3.2% this week
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">Revenue Impact</div>
                        <div class="stat-icon stat-icon-warning">
                            <span class="material-icons">monetization_on</span>
                        </div>
                    </div>
                    <div class="stat-value">$24,567</div>
                    <div class="stat-change positive">
                        <span class="material-icons trending-icon">trending_up</span>
                        +18.3% this month
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <div class="stat-title">System Uptime</div>
                        <div class="stat-icon stat-icon-success">
                            <span class="material-icons">schedule</span>
                        </div>
                    </div>
                    <div class="stat-value">99.8%</div>
                    <div class="stat-change positive">
                        <span class="material-icons check-icon">check_circle</span>
                        Excellent
                    </div>
                </div>
            </div>

            <!-- AI Agents Hub -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">🤖 AI Agents Hub</h2>
                    <div class="section-actions">
                        <span class="tier-badge pro">Pro Plan</span>
                        <span class="status-count" id="agentStatusCount">18/46 Available</span>
                        <a href="/pages/pricing.html" class="btn btn-outline">Unlock More</a>
                    </div>
                </div>
                
                <!-- Tier Summary -->
                <div class="tier-summary">
                    <div class="summary-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="availableAgents">18</div>
                            <div class="stat-label">Available</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="lockedAgents">28</div>
                            <div class="stat-label">Locked</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">8</div>
                            <div class="stat-label">Categories</div>
                        </div>
                    </div>
                </div>

                <!-- NEW AI AGENTS SHOWCASE -->
                <div class="agents-showcase">
                    <h3 class="showcase-title">🚀 New AI Agents</h3>
                    <div class="agent-grid enhanced">
                        <!-- Market Shift Forecaster AI (Enterprise+) -->
                        <div class="agent-card locked" data-agent="MarketShiftForecasterAI">
                            <div class="agent-header">
                                <div class="agent-icon locked-icon">🔮</div>
                                <div class="agent-info">
                                    <h3 class="agent-name">Market Shift Forecaster</h3>
                                    <span class="tier-badge required">Enterprise+ Required</span>
                                </div>
                                <div class="lock-indicator">
                                    <span class="material-icons">lock</span>
                                </div>
                            </div>
                            <div class="agent-description">Predicts market shifts and identifies emerging trends before competitors</div>
                            <div class="agent-features">
                                <span class="feature-tag locked">Market trend prediction</span>
                                <span class="feature-tag locked">Seasonal pattern analysis</span>
                                <span class="feature-tag more">+3 more</span>
                            </div>
                            <div class="agent-actions">
                                <button class="btn btn-upgrade" onclick="upgradeToTier('enterprise')">
                                    <span class="material-icons">upgrade</span>
                                    Upgrade to Enterprise+
                                </button>
                            </div>
                        </div>

                        <!-- Product Matcher AI (Pro+) - ACCESSIBLE -->
                        <div class="agent-card accessible" data-agent="ProductMatcherAI">
                            <div class="agent-header">
                                <div class="agent-icon">🔍</div>
                                <div class="agent-info">
                                    <h3 class="agent-name">Product Matcher AI</h3>
                                    <span class="tier-badge pro">Pro+</span>
                                </div>
                                <div class="agent-status active">
                                    <span class="status-indicator"></span>
                                    Active
                                </div>
                            </div>
                            <div class="agent-description">Intelligent product matching and duplicate detection across platforms</div>
                            <div class="agent-features">
                                <span class="feature-tag">Cross-platform matching</span>
                                <span class="feature-tag">Duplicate detection</span>
                                <span class="feature-tag">Similarity analysis</span>
                            </div>
                            <div class="agent-actions">
                                <button class="btn btn-primary" onclick="launchAgent('ProductMatcherAI')">
                                    <span class="material-icons">launch</span>
                                    Launch
                                </button>
                                <button class="btn btn-secondary" onclick="viewDetails('ProductMatcherAI')">
                                    <span class="material-icons">info</span>
                                    Details
                                </button>
                            </div>
                        </div>

                        <!-- UPC Blacklist Detector (Starter+) - ACCESSIBLE -->
                        <div class="agent-card accessible" data-agent="UPCBlacklistDetector">
                            <div class="agent-header">
                                <div class="agent-icon">✅</div>
                                <div class="agent-info">
                                    <h3 class="agent-name">UPC Blacklist Detector</h3>
                                    <span class="tier-badge starter">Starter+</span>
                                </div>
                                <div class="agent-status active">
                                    <span class="status-indicator"></span>
                                    Active
                                </div>
                            </div>
                            <div class="agent-description">UPC validation and compliance checking with blacklist detection</div>
                            <div class="agent-features">
                                <span class="feature-tag">UPC format validation</span>
                                <span class="feature-tag">Blacklist detection</span>
                                <span class="feature-tag">Compliance checking</span>
                            </div>
                            <div class="agent-actions">
                                <button class="btn btn-primary" onclick="launchAgent('UPCBlacklistDetector')">
                                    <span class="material-icons">launch</span>
                                    Launch
                                </button>
                                <button class="btn btn-secondary" onclick="viewDetails('UPCBlacklistDetector')">
                                    <span class="material-icons">info</span>
                                    Details
                                </button>
                            </div>
                        </div>

                        <!-- IP Flagging Agent (Starter+) - ACCESSIBLE -->
                        <div class="agent-card accessible" data-agent="IPFlaggingAgent">
                            <div class="agent-header">
                                <div class="agent-icon">🛡️</div>
                                <div class="agent-info">
                                    <h3 class="agent-name">IP Flagging Agent</h3>
                                    <span class="tier-badge starter">Starter+</span>
                                </div>
                                <div class="agent-status active">
                                    <span class="status-indicator"></span>
                                    Active
                                </div>
                            </div>
                            <div class="agent-description">Intellectual property violation detection and protection monitoring</div>
                            <div class="agent-features">
                                <span class="feature-tag">Patent checking</span>
                                <span class="feature-tag">Trademark detection</span>
                                <span class="feature-tag">IP violation alerts</span>
                            </div>
                            <div class="agent-actions">
                                <button class="btn btn-primary" onclick="launchAgent('IPFlaggingAgent')">
                                    <span class="material-icons">launch</span>
                                    Launch
                                </button>
                                <button class="btn btn-secondary" onclick="viewDetails('IPFlaggingAgent')">
                                    <span class="material-icons">info</span>
                                    Details
                                </button>
                            </div>
                        </div>

                        <!-- Gated Product Advisor AI (Pro+) - ACCESSIBLE -->
                        <div class="agent-card accessible" data-agent="GatedProductAdvisorAI">
                            <div class="agent-header">
                                <div class="agent-icon">🎯</div>
                                <div class="agent-info">
                                    <h3 class="agent-name">Product Advisory AI</h3>
                                    <span class="tier-badge pro">Pro+</span>
                                </div>
                                <div class="agent-status active">
                                    <span class="status-indicator"></span>
                                    Active
                                </div>
                            </div>
                            <div class="agent-description">AI-powered product advisory with market intelligence</div>
                            <div class="agent-features">
                                <span class="feature-tag">Intelligent product advice</span>
                                <span class="feature-tag">Market timing insights</span>
                                <span class="feature-tag">Seasonal recommendations</span>
                            </div>
                            <div class="agent-actions">
                                <button class="btn btn-primary" onclick="launchAgent('GatedProductAdvisorAI')">
                                    <span class="material-icons">launch</span>
                                    Launch
                                </button>
                                <button class="btn btn-secondary" onclick="viewDetails('GatedProductAdvisorAI')">
                                    <span class="material-icons">info</span>
                                    Details
                                </button>
                            </div>
                        </div>

                        <!-- Bundle Profit Estimator (Pro+) - ACCESSIBLE -->
                        <div class="agent-card accessible" data-agent="BundleProfitEstimator">
                            <div class="agent-header">
                                <div class="agent-icon">📊</div>
                                <div class="agent-info">
                                    <h3 class="agent-name">Bundle Profit Estimator</h3>
                                    <span class="tier-badge pro">Pro+</span>
                                </div>
                                <div class="agent-status active">
                                    <span class="status-indicator"></span>
                                    Active
                                </div>
                            </div>
                            <div class="agent-description">Advanced profit estimation for product bundles</div>
                            <div class="agent-features">
                                <span class="feature-tag">Bundle profit estimation</span>
                                <span class="feature-tag">Market demand analysis</span>
                                <span class="feature-tag">Synergy calculation</span>
                            </div>
                            <div class="agent-actions">
                                <button class="btn btn-primary" onclick="launchAgent('BundleProfitEstimator')">
                                    <span class="material-icons">launch</span>
                                    Launch
                                </button>
                                <button class="btn btn-secondary" onclick="viewDetails('BundleProfitEstimator')">
                                    <span class="material-icons">info</span>
                                    Details
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Core Agents Grid -->
                <div class="core-agents">
                    <h3 class="showcase-title">⚡ Core AI Agents</h3>
                    <div class="agent-grid">
                        <div class="agent-card">
                            <div class="agent-header">
                                <div class="agent-name">Deal Finder AI</div>
                                <div class="agent-status">
                                    <div class="status-dot status-active"></div>
                                    Active
                                </div>
                            </div>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 94%"></div>
                            </div>
                            <div class="agent-metrics">
                                <span>Found 24 deals today</span>
                                <span>Last run: 2 min ago</span>
                            </div>
                        </div>

                        <div class="agent-card">
                            <div class="agent-header">
                                <div class="agent-name">Price Optimizer</div>
                                <div class="agent-status">
                                    <div class="status-dot status-active"></div>
                                    Active
                                </div>
                            </div>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 96%"></div>
                            </div>
                            <div class="agent-metrics">
                                <span>Updated 127 prices</span>
                                <span>Last run: 1 min ago</span>
                            </div>
                        </div>

                        <div class="agent-card">
                            <div class="agent-header">
                                <div class="agent-name">Trend Analyzer</div>
                                <div class="agent-status">
                                    <div class="status-dot status-active"></div>
                                    Active
                                </div>
                            </div>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 92%"></div>
                            </div>
                            <div class="agent-metrics">
                                <span>15 trends identified</span>
                                <span>Last run: 3 min ago</span>
                            </div>
                        </div>

                        <div class="agent-card">
                            <div class="agent-header">
                                <div class="agent-name">Inventory Optimizer</div>
                                <div class="agent-status">
                                    <div class="status-dot status-active"></div>
                                    Active
                                </div>
                            </div>
                            <div class="performance-bar">
                                <div class="performance-fill" style="width: 93%"></div>
                            </div>
                            <div class="agent-metrics">
                                <span>Prevented 3 stockouts</span>
                                <span>Last run: 1 min ago</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Upgrade Section -->
                <div class="upgrade-section" id="upgradeSection">
                    <div class="upgrade-header">
                        <h3>🚀 Unlock More AI Power</h3>
                        <p>Upgrade to Enterprise+ to access 28 more AI agents including advanced forecasting and security features</p>
                    </div>
                    <div class="upgrade-benefits">
                        <div class="benefit-item">✅ Access to Enterprise+ AI agents</div>
                        <div class="benefit-item">✅ Market forecasting and prediction</div>
                        <div class="benefit-item">✅ Advanced security and compliance</div>
                    </div>
                    <div class="upgrade-actions">
                        <button class="btn btn-upgrade-primary" onclick="upgradePlan('enterprise')">
                            Upgrade to Enterprise+
                        </button>
                        <button class="btn btn-secondary" onclick="viewAllPlans()">
                            View All Plans
                        </button>
                    </div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Recent Activity</h2>
                </div>
                
                <div class="activity-list">
                    <div class="activity-item">
                        <div class="activity-icon" style="background: rgba(76, 175, 80, 0.1); color: var(--secondary-color);">
                            <span class="material-icons">check_circle</span>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Deal Finder AI discovered 24 new profitable products</div>
                            <div class="activity-time">2 minutes ago</div>
                        </div>
                    </div>

                    <div class="activity-item">
                        <div class="activity-icon" style="background: rgba(0, 102, 204, 0.1); color: var(--primary-color);">
                            <span class="material-icons">trending_up</span>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Price Optimizer updated 127 product prices</div>
                            <div class="activity-time">5 minutes ago</div>
                        </div>
                    </div>

                    <div class="activity-item">
                        <div class="activity-icon" style="background: rgba(255, 193, 7, 0.1); color: var(--accent-color);">
                            <span class="material-icons">analytics</span>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Trend Analyzer identified 15 emerging market opportunities</div>
                            <div class="activity-time">12 minutes ago</div>
                        </div>
                    </div>

                    <div class="activity-item">
                        <div class="activity-icon" style="background: rgba(76, 175, 80, 0.1); color: var(--secondary-color);">
                            <span class="material-icons">inventory</span>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Inventory Optimizer prevented 3 stockouts</div>
                            <div class="activity-time">18 minutes ago</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="section">
                <div class="section-header">
                    <h2 class="section-title">Quick Actions</h2>
                </div>
                
                <div class="actions-grid">
                    <a href="/pages/dashboard_products.html" class="action-button">
                        <div class="action-icon">
                            <span class="material-icons">search</span>
                        </div>
                        <div class="action-title">Find Deals</div>
                        <div class="action-description">Discover profitable products to sell</div>
                    </a>

                    <a href="#" class="action-button">
                        <div class="action-icon">
                            <span class="material-icons">assessment</span>
                        </div>
                        <div class="action-title">View Reports</div>
                        <div class="action-description">Track your performance and profits</div>
                    </a>

                    <a href="#" class="action-button">
                        <div class="action-icon">
                            <span class="material-icons">inventory_2</span>
                        </div>
                        <div class="action-title">Manage Inventory</div>
                        <div class="action-description">Optimize stock levels and orders</div>
                    </a>

                    <a href="/pages/pricing.html" class="action-button">
                        <div class="action-icon">
                            <span class="material-icons">upgrade</span>
                        </div>
                        <div class="action-title">Upgrade Plan</div>
                        <div class="action-description">Unlock more AI agents and features</div>
                    </a>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Simulate real-time updates
        function updateMetrics() {
            // This would connect to real-time API in production
            console.log('Updating metrics...');
        }

        // Update every 30 seconds
        setInterval(updateMetrics, 30000);

        // NEW AI AGENT FUNCTIONS
        function launchAgent(agentName) {
            console.log(`Launching agent: ${agentName}`);
            
            // Show loading state
            const agentCard = document.querySelector(`[data-agent="${agentName}"]`);
            if (agentCard) {
                const button = agentCard.querySelector('.btn-primary');
                if (button) {
                    const originalText = button.innerHTML;
                    button.innerHTML = '<span class="material-icons">hourglass_empty</span> Launching...';
                    button.disabled = true;
                    
                    // Simulate agent launch
                    setTimeout(() => {
                        button.innerHTML = originalText;
                        button.disabled = false;
                        showAgentInterface(agentName);
                    }, 2000);
                }
            }
        }
        
        function showAgentInterface(agentName) {
            const agentInterfaces = {
                'ProductMatcherAI': `
                    <div class="agent-interface">
                        <h3>🔍 Product Matcher AI</h3>
                        <p>Advanced product matching and duplicate detection</p>
                        <div class="interface-content">
                            <div class="status">Status: Active | Confidence: 94% | Matches Found: 127</div>
                            <div class="actions">
                                <button onclick="runProductMatching()">Run Matching</button>
                                <button onclick="viewMatchResults()">View Results</button>
                            </div>
                        </div>
                    </div>
                `,
                'UPCBlacklistDetector': `
                    <div class="agent-interface">
                        <h3>✅ UPC Blacklist Detector</h3>
                        <p>UPC validation and compliance checking</p>
                        <div class="interface-content">
                            <div class="status">Status: Active | Validated: 1,247 UPCs | Flagged: 23</div>
                            <div class="actions">
                                <button onclick="validateUPCs()">Validate UPCs</button>
                                <button onclick="viewBlacklist()">View Blacklist</button>
                            </div>
                        </div>
                    </div>
                `,
                'IPFlaggingAgent': `
                    <div class="agent-interface">
                        <h3>🛡️ IP Flagging Agent</h3>
                        <p>Intellectual property violation detection and protection</p>
                        <div class="interface-content">
                            <div class="status">Status: Active | Scanned: 892 | Violations: 12 | Accuracy: 98.7%</div>
                            <div class="actions">
                                <button onclick="scanForIP()">Scan for IP Violations</button>
                                <button onclick="viewIPReport()">View IP Report</button>
                            </div>
                        </div>
                    </div>
                `,
                'GatedProductAdvisorAI': `
                    <div class="agent-interface">
                        <h3>🎯 Product Advisory AI</h3>
                        <p>AI-powered product advisory with market intelligence</p>
                        <div class="interface-content">
                            <div class="status">Status: Active | Advice Generated: 45 | Accuracy: 92%</div>
                            <div class="actions">
                                <button onclick="generateAdvice()">Generate Advice</button>
                                <button onclick="viewRecommendations()">View Recommendations</button>
                            </div>
                        </div>
                    </div>
                `,
                'BundleProfitEstimator': `
                    <div class="agent-interface">
                        <h3>📊 Bundle Profit Estimator</h3>
                        <p>Advanced profit estimation for product bundles</p>
                        <div class="interface-content">
                            <div class="status">Status: Active | Bundles Analyzed: 78 | Avg Profit: $127.50</div>
                            <div class="actions">
                                <button onclick="estimateProfits()">Estimate Profits</button>
                                <button onclick="viewAnalysis()">View Analysis</button>
                            </div>
                        </div>
                    </div>
                `
            };
            
            const interfaceHTML = agentInterfaces[agentName] || `
                <div class="agent-interface">
                    <h3>${agentName}</h3>
                    <p>Agent interface loading...</p>
                </div>
            `;
            
            // Create modal or open in new section
            alert(`Agent Interface Opened!\n\n${agentName} is now running with full functionality.\n\nIn production, this would open the agent's dedicated interface.`);
        }
        
        function viewDetails(agentName) {
            const agentDetails = {
                'ProductMatcherAI': `
                    Product Matcher AI - Tier: Pro+
                    
                    Advanced Features:
                    • Cross-platform product matching
                    • Duplicate detection algorithms  
                    • Similarity analysis with ML
                    • Price variance detection
                    • Conflict prevention system
                    
                    Performance Metrics:
                    • 94% accuracy rate
                    • 127 matches found today
                    • 2.3s average processing time
                    • 99.7% uptime this month
                `,
                'UPCBlacklistDetector': `
                    UPC Blacklist Detector - Tier: Starter+
                    
                    Security Features:
                    • UPC format validation
                    • Real-time blacklist checking
                    • Compliance verification
                    • Security alert system
                    • Batch processing support
                    
                    Performance Metrics:
                    • 1,247 UPCs validated today
                    • 23 UPCs flagged
                    • 0.1s validation speed
                    • 100% compliance rate
                `,
                'IPFlaggingAgent': `
                    IP Flagging Agent - Tier: Starter+
                    
                    Protection Features:
                    • Patent violation detection
                    • Trademark infringement alerts
                    • Copyright conflict monitoring
                    • IP database cross-reference
                    • Legal compliance verification
                    
                    Performance Metrics:
                    • 892 products scanned today
                    • 12 IP violations detected
                    • 98.7% accuracy rate
                    • Zero false positives
                `,
                'GatedProductAdvisorAI': `
                    Product Advisory AI - Tier: Pro+
                    
                    Intelligence Features:
                    • Market timing analysis
                    • Seasonal recommendations
                    • Portfolio optimization
                    • Risk assessment
                    • Personalized insights
                    
                    Performance Metrics:
                    • 45 advice reports generated
                    • 92% prediction accuracy
                    • $25,000 additional profit identified
                    • 15 seasonal opportunities detected
                `,
                'BundleProfitEstimator': `
                    Bundle Profit Estimator - Tier: Pro+
                    
                    Analytics Features:
                    • Advanced profit calculation
                    • Market demand analysis
                    • Product synergy detection
                    • Risk factor assessment
                    • Optimization recommendations
                    
                    Performance Metrics:
                    • 78 bundles analyzed
                    • $127.50 average profit
                    • 34% margin improvement
                    • 89% confidence score
                `
            };
            
            const details = agentDetails[agentName] || `${agentName} details not available.`;
            alert(details);
        }
        
        function upgradeToTier(tier) {
            const tierDetails = {
                'enterprise': {
                    name: 'Enterprise+',
                    price: '$199/month', 
                    agents: '46 AI Agents',
                    features: ['Market Forecasting', 'Security Analysis', 'Priority Support']
                }
            };
            
            const details = tierDetails[tier];
            if (details) {
                const message = `Upgrade to ${details.name}?\n\n` +
                    `💰 Price: ${details.price}\n` +
                    `🤖 Access: ${details.agents}\n` +
                    `✨ Features: ${details.features.join(', ')}\n\n` +
                    `This would redirect to the pricing page in production.`;
                
                if (confirm(message)) {
                    window.location.href = '/pages/pricing.html';
                }
            }
        }
        
        function upgradePlan(tier) {
            upgradeToTier(tier);
        }
        
        function viewAllPlans() {
            window.location.href = '/pages/pricing.html';
        }

        // Agent-specific functions
        function runProductMatching() {
            alert('Product Matching Started!\n\nScanning 1,247 products across platforms...\nEstimated completion: 3 minutes');
        }
        
        function viewMatchResults() {
            alert('Match Results:\n\n✅ 127 matches found\n🔍 23 potential duplicates\n⚠️ 5 conflicts requiring review\n📊 94% accuracy rate');
        }
        
        function validateUPCs() {
            alert('UPC Validation Started!\n\nValidating batch of 150 UPCs...\nChecking format and blacklist status...');
        }
        
        function viewBlacklist() {
            alert('UPC Blacklist:\n\n🚫 247 blacklisted UPCs\n📅 Last updated: 2 hours ago\n🔄 Auto-sync enabled\n⚡ Real-time monitoring active');
        }
        
        function generateAdvice() {
            alert('Generating Product Advice...\n\n🎯 Analyzing market conditions\n📈 Processing seasonal trends\n💡 Creating recommendations\n\nAdvice ready in 30 seconds!');
        }
        
        function viewRecommendations() {
            alert('Current Recommendations:\n\n🟢 Buy: Electronics (Holiday demand rising)\n🟡 Hold: Clothing (Market stabilizing)\n🔴 Sell: Garden (Season ending)\n📊 15 opportunities identified');
        }
        
        function estimateProfits() {
            alert('Bundle Profit Estimation Started!\n\n📊 Analyzing 25 product bundles\n💰 Calculating profit margins\n📈 Assessing market demand\n\nResults in 45 seconds!');
        }
        
        function viewAnalysis() {
            alert('Bundle Analysis Results:\n\n💰 Top Bundle: $247 profit (34% margin)\n📊 Average: $127.50 profit\n🎯 Best Category: Electronics\n🚀 3 high-opportunity bundles identified');
        }

        // Scan Usage Tracking System
        class ScanUsageTracker {
            constructor() {
                this.userTier = 'pro'; // Dynamic from backend
                this.scanLimits = {
                    'starter': 100,
                    'pro': 1000,
                    'enterprise': 10000,
                    'titan': -1, // unlimited
                    'odyssey': -1,
                    'vanguard': -1
                };
                this.currentScans = 73; // Dynamic from backend
                this.init();
            }

            init() {
                this.updateScanDisplay();
                this.checkUsageAlerts();
            }

            updateScanDisplay() {
                const limit = this.scanLimits[this.userTier];
                const percentage = limit === -1 ? 0 : (this.currentScans / limit) * 100;
                
                // Update scan count display
                const scanCountEl = document.getElementById('scanCount');
                if (scanCountEl) {
                    if (limit === -1) {
                        scanCountEl.textContent = `${this.currentScans} / Unlimited`;
                    } else {
                        scanCountEl.textContent = `${this.currentScans} / ${limit}`;
                    }
                }

                // Update tier badge
                const tierEl = document.getElementById('currentTier');
                if (tierEl) {
                    tierEl.textContent = this.userTier.charAt(0).toUpperCase() + this.userTier.slice(1);
                }

                // Update usage bar
                const usageFill = document.getElementById('scanUsageFill');
                const usageIcon = document.getElementById('usageIcon');
                
                if (usageFill) {
                    if (limit === -1) {
                        usageFill.style.width = '100%';
                        usageFill.className = 'scan-usage-fill usage-low';
                        if (usageIcon) usageIcon.className = 'stat-icon usage-icon';
                    } else {
                        usageFill.style.width = `${Math.min(percentage, 100)}%`;
                        
                        if (percentage < 50) {
                            usageFill.className = 'scan-usage-fill usage-low';
                            if (usageIcon) usageIcon.className = 'stat-icon usage-icon';
                        } else if (percentage < 90) {
                            usageFill.className = 'scan-usage-fill usage-medium';
                            if (usageIcon) usageIcon.className = 'stat-icon usage-icon warning';
                        } else {
                            usageFill.className = 'scan-usage-fill usage-high';
                            if (usageIcon) usageIcon.className = 'stat-icon usage-icon critical';
                        }
                    }
                }
            }

            checkUsageAlerts() {
                const limit = this.scanLimits[this.userTier];
                if (limit === -1) return; // Unlimited tiers

                const percentage = (this.currentScans / limit) * 100;
                const warningAlert = document.querySelector('.scan-alert.warning');
                const criticalAlert = document.querySelector('.scan-alert.critical');

                if (percentage >= 90) {
                    if (criticalAlert) criticalAlert.style.display = 'block';
                    if (warningAlert) warningAlert.style.display = 'none';
                } else if (percentage >= 70) {
                    if (warningAlert) warningAlert.style.display = 'block';
                    if (criticalAlert) criticalAlert.style.display = 'none';
                } else {
                    if (warningAlert) warningAlert.style.display = 'none';
                    if (criticalAlert) criticalAlert.style.display = 'none';
                }
            }

            upgradeFromAlert() {
                if (confirm('Upgrade to increase your scan limit?\n\nPro: 1,000 scans/month\nEnterprise: 10,000 scans/month\nTitan+: Unlimited scans')) {
                    window.location.href = '/pages/pricing.html';
                }
            }
        }

        // Initialize scan usage tracker
        const scanTracker = new ScanUsageTracker();

        // Agent status simulation
        function simulateAgentActivity() {
            const activities = [
                'Deal Finder AI discovered 3 new profitable products',
                'Price Optimizer updated 24 product prices',
                'Trend Analyzer identified emerging market opportunity',
                'Inventory Optimizer prevented potential stockout',
                'Product Matcher AI found 12 duplicate listings',
                'UPC Blacklist Detector flagged 2 prohibited items',
                'Product Advisory AI generated 5 new recommendations',
                'Bundle Profit Estimator analyzed 8 product combinations'
            ];
            
            // Randomly update activity feed
            setInterval(() => {
                const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                console.log(`New Activity: ${randomActivity}`);
                // In production, this would update the activity feed UI
            }, 45000); // Every 45 seconds
        }

        // Start activity simulation
        simulateAgentActivity();

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 Dealvoy AI Dashboard Loaded - 6 New Agents Integrated');
            console.log('✅ Tier Enforcement Active');
            console.log('🤖 46 Total AI Agents Available');
        });
    </script>
                        usageIcon.className = 'stat-icon usage-icon critical';
                    }
                }
            }

            checkUsageAlerts() {
                const limit = this.scanLimits[this.userTier];
                const percentage = limit === -1 ? 0 : (this.currentScans / limit) * 100;
                const alertEl = document.getElementById('scanAlert');

                if (limit === -1) {
                    alertEl.style.display = 'none';
                } else if (percentage >= 100) {
                    alertEl.className = 'scan-alert critical';
                    alertEl.innerHTML = `
                        🚨 Scan limit reached. Upgrade your plan to continue scanning.
                        <button class="upgrade-btn" onclick="showUpgradeModal()">Upgrade Now</button>
                    `;
                } else if (percentage >= 75) {
                    alertEl.className = 'scan-alert warning';
                    alertEl.innerHTML = `
                        ⚠️ You're nearing your scan limit. Consider upgrading for more power!
                        <button class="upgrade-btn" onclick="showUpgradeModal()">Upgrade Plan</button>
                    `;
                } else {
                    alertEl.style.display = 'none';
                }
            }

            logScan(agentName, outcome) {
                // Log scan usage
                const scanLog = {
                    timestamp: new Date().toISOString(),
                    userEmail: 'john.doe@example.com', // Dynamic from session
                    agentName: agentName,
                    outcome: outcome,
                    tierAtTime: this.userTier
                };

                // Send to backend
                console.log('Scan logged:', scanLog);
                
                // Update current count
                this.currentScans++;
                this.updateScanDisplay();
                this.checkUsageAlerts();
            }

            getUpgradeRecommendations() {
                const currentTier = this.userTier;
                const recommendations = {
                    'starter': {
                        nextTier: 'pro',
                        newLimit: 1000,
                        price: '$29/month',
                        benefits: ['10x more scans', '15 AI agents', 'Priority support']
                    },
                    'pro': {
                        nextTier: 'enterprise',
                        newLimit: 10000,
                        price: '$79/month',
                        benefits: ['10x more scans', '25 AI agents', 'Dedicated support']
                    },
                    'enterprise': {
                        nextTier: 'titan',
                        newLimit: 'Unlimited',
                        price: '$159/month',
                        benefits: ['Unlimited scans', '35 AI agents', 'White-glove support']
                    }
                };

                return recommendations[currentTier] || null;
            }
        }

        // Upgrade Modal Functions
        function showUpgradeModal() {
            const recommendation = scanTracker.getUpgradeRecommendations();
            if (recommendation) {
                const modal = `
                    <div class="upgrade-modal" style="
                        position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                        background: rgba(0,0,0,0.5); display: flex;
                        align-items: center; justify-content: center; z-index: 1000;">
                        <div style="
                            background: white; border-radius: 12px; padding: 32px;
                            max-width: 400px; width: 90%; box-shadow: 0 20px 40px rgba(0,0,0,0.3);">
                            <h3 style="margin: 0 0 16px 0; color: var(--primary-color);">
                                🚀 Upgrade to ${recommendation.nextTier.charAt(0).toUpperCase() + recommendation.nextTier.slice(1)}
                            </h3>
                            <p style="margin: 0 0 16px 0; color: var(--text-secondary);">
                                Get ${recommendation.newLimit} monthly scans for ${recommendation.price}
                            </p>
                            <ul style="margin: 0 0 24px 0; padding-left: 20px;">
                                ${recommendation.benefits.map(benefit => `<li>${benefit}</li>`).join('')}
                            </ul>
                            <div style="display: flex; gap: 12px;">
                                <button onclick="closeUpgradeModal()" style="
                                    flex: 1; padding: 12px; border: 1px solid var(--border-color);
                                    background: white; border-radius: 6px; cursor: pointer;">
                                    Maybe Later
                                </button>
                                <button onclick="redirectToUpgrade('${recommendation.nextTier}')" style="
                                    flex: 1; padding: 12px; background: var(--primary-color);
                                    color: white; border: none; border-radius: 6px; cursor: pointer;">
                                    Upgrade Now
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                document.body.insertAdjacentHTML('beforeend', modal);
            }
        }

        function closeUpgradeModal() {
            const modal = document.querySelector('.upgrade-modal');
            if (modal) modal.remove();
        }

        function redirectToUpgrade(tier) {
            console.log(`Redirecting to upgrade: ${tier}`);
            // Redirect to Stripe checkout or pricing page
            window.location.href = `/pages/pricing.html?upgrade=${tier}`;
        }

        // Initialize scan tracker
        let scanTracker;

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Dashboard loaded - 46 agents monitoring');
            scanTracker = new ScanUsageTracker();
            
            // Simulate scan usage (for demo)
            setTimeout(() => {
                scanTracker.logScan('DealFinderAI', 'success');
            }, 5000);
        });
    </script>
</body>
</html>
